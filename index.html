<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Huokaingthara GitHub Core</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <style>
        :root { --neon-green: #00ff41; --bg-black: #050505; }
        body { background: var(--bg-black); color: var(--neon-green); font-family: 'Courier New', monospace; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        #sidebar { width: 350px; background: rgba(0, 10, 0, 0.95); border-right: 2px solid var(--neon-green); display: flex; flex-direction: column; padding: 15px; z-index: 10; }
        #visualizer { flex-grow: 1; background: #000; }
        #chat-output { flex-grow: 1; overflow-y: auto; border: 1px solid #004411; padding: 10px; margin-bottom: 10px; background: rgba(0,0,0,0.8); }
        .ai-msg { color: var(--neon-green); margin-bottom: 10px; border-left: 2px solid var(--neon-green); padding-left: 5px; }
        .user-msg { color: #fff; margin-bottom: 5px; opacity: 0.8; }
        input { background: #000; border: 1px solid var(--neon-green); color: var(--neon-green); padding: 12px; outline: none; width: calc(100% - 26px); }
        .status-bar { font-size: 0.7em; margin-top: 10px; color: #888; }
    </style>
</head>
<body>

<div id="sidebar">
    <h2>NEURAL CORE v5.0</h2>
    <div id="chat-output"></div>
    <div id="learning-indicator" style="display:none; color: yellow; font-size: 0.8em; margin-bottom: 5px;">[SYSTEM: LEARNING MODE ACTIVE]</div>
    <input type="text" id="userInput" placeholder="Query patterns..." autocomplete="off">
    <div class="status-bar" id="stats">Memory: Loading...</div>
    <button onclick="exportBrain()" style="margin-top:10px; background:none; border:1px solid #444; color:#888; cursor:pointer; font-size: 10px;">DOWNLOAD BRAIN.JSON</button>
</div>

<svg id="visualizer"></svg>

<script>
    // --- NEURAL MEMORY CONFIG ---<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Huokaingthara GitHub Core</title>
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <style>
        :root { --neon-green: #00ff41; --bg-black: #050505; }
        body { background: var(--bg-black); color: var(--neon-green); font-family: 'Courier New', monospace; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        #sidebar { width: 350px; background: rgba(0, 10, 0, 0.95); border-right: 2px solid var(--neon-green); display: flex; flex-direction: column; padding: 15px; z-index: 10; }
        #visualizer { flex-grow: 1; background: #000; }
        #chat-output { flex-grow: 1; overflow-y: auto; border: 1px solid #004411; padding: 10px; margin-bottom: 10px; background: rgba(0,0,0,0.8); }
        .ai-msg { color: var(--neon-green); margin-bottom: 10px; border-left: 2px solid var(--neon-green); padding-left: 5px; }
        .user-msg { color: #fff; margin-bottom: 5px; opacity: 0.8; }
        input { background: #000; border: 1px solid var(--neon-green); color: var(--neon-green); padding: 12px; outline: none; width: calc(100% - 26px); }
        .status-bar { font-size: 0.7em; margin-top: 10px; color: #888; }
    </style>
</head>
<body>

<div id="sidebar">
    <h2>NEURAL CORE v5.0</h2>
    <div id="chat-output"></div>
    <div id="learning-indicator" style="display:none; color: yellow; font-size: 0.8em; margin-bottom: 5px;">[SYSTEM: LEARNING MODE ACTIVE]</div>
    <input type="text" id="userInput" placeholder="Query patterns..." autocomplete="off">
    <div class="status-bar" id="stats">Memory: Loading...</div>
    <button onclick="exportBrain()" style="margin-top:10px; background:none; border:1px solid #444; color:#888; cursor:pointer; font-size: 10px;">DOWNLOAD BRAIN.JSON</button>
</div>

<svg id="visualizer"></svg>

<script>
    // --- NEURAL MEMORY CONFIG ---
    let brain = {};
    let isLearning = false;
    let lastQuery = "";

    // Load Initial Brain Data
    async function bootSystem() {
        const localBrain = localStorage.getItem('huokaingthara_brain');
        if (localBrain) {
            brain = JSON.parse(localBrain);
        } else {
            // Attempt to fetch your initial 250+ entries from a local json file
            try {
                const response = await fetch('brain.json');
                brain = await response.json();
                saveToLocalStorage();
            } catch (e) {
                brain = { "identity": "Huokaingthara Autonomous OS", "status": "Initial boot complete" };
            }
        }
        updateUI();
        initGraph();
    }

    function saveToLocalStorage() {
        localStorage.setItem('huokaingthara_brain', JSON.stringify(brain));
    }

    // --- NLP & SEARCH LOGIC ---
    function findMatch(query) {
        const keys = Object.keys(brain);
        // Simple fuzzy match logic
        const match = keys.find(k => k.toLowerCase().includes(query.toLowerCase()) || query.toLowerCase().includes(k.toLowerCase()));
        return match ? brain[match] : null;
    }

    // --- UI INTERACTION ---
    const input = document.getElementById('userInput');
    input.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            const val = input.value.trim();
            if (!val) return;
            
            processQuery(val);
            input.value = "";
        }
    });

    function processQuery(q) {
        const chat = document.getElementById('chat-output');
        chat.innerHTML += `<div class="user-msg">> ${q}</div>`;

        if (isLearning) {
            brain[lastQuery] = q;
            saveToLocalStorage();
            chat.innerHTML += `<div class="ai-msg">Neural integration complete. '${lastQuery}' defined.</div>`;
            isLearning = false;
            document.getElementById('learning-indicator').style.display = 'none';
            updateUI();
            return;
        }

        const answer = findMatch(q);
        if (answer) {
            chat.innerHTML += `<div class="ai-msg">AI: ${answer}</div>`;
        } else {
            chat.innerHTML += `<div class="ai-msg" style="color:yellow;">Pattern unknown. Please provide a definition to integrate this concept.</div>`;
            isLearning = true;
            lastQuery = q;
            document.getElementById('learning-indicator').style.display = 'block';
        }
        chat.scrollTop = chat.scrollHeight;
    }

    function updateUI() {
        document.getElementById('stats').innerText = `Memory: ${Object.keys(brain).length} Patterns | System: Online`;
        updateGraph();
    }

    function exportBrain() {
        const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(brain, null, 4));
        const downloadAnchorNode = document.createElement('a');
        downloadAnchorNode.setAttribute("href", dataStr);
        downloadAnchorNode.setAttribute("download", "brain.json");
        document.body.appendChild(downloadAnchorNode);
        downloadAnchorNode.click();
        downloadAnchorNode.remove();
    }

    // --- D3.js VISUALIZER ---
    const svg = d3.select("#visualizer");
    let simulation;

    function initGraph() {
        updateGraph();
    }

    function updateGraph() {
        const width = window.innerWidth - 350;
        const height = window.innerHeight;
        svg.selectAll("*").remove();

        const nodes = [{ id: "CORE", group: 1 }];
        const links = [];
        
        // Take latest 50 entries to avoid lag
        Object.keys(brain).slice(-50).forEach(key => {
            nodes.push({ id: key, group: 2 });
            links.append({ source: "CORE", target: key });
        });

        simulation = d3.forceSimulation(nodes)
            .force("link", d3.forceLink(links).id(d => d.id))
            .force("charge", d3.forceManyBody().strength(-200))
            .force("center", d3.forceCenter(width / 2, height / 2));

        const link = svg.append("g").selectAll("line").data(links).enter().append("line")
            .attr("stroke", "#004411");

        const node = svg.append("g").selectAll("circle").data(nodes).enter().append("circle")
            .attr("r", d => d.group === 1 ? 10 : 5)
            .attr("fill", d => d.group === 1 ? "red" : "#00ff41");

        simulation.on("tick", () => {
            link.attr("x1", d => d.source.x).attr("y1", d => d.source.y).attr("x2", d => d.target.x).attr("y2", d => d.target.y);
            node.attr("cx", d => d.x).attr("cy", d => d.y);
        });
    }

    window.onload = bootSystem;
</script>

</body>
</html>
    
    let brain = {};
    let isLearning = false;
    let lastQuery = "";

    // Load Initial Brain Data
    async function bootSystem() {
        const localBrain = localStorage.getItem('huokaingthara_brain');
        if (localBrain) {
            brain = JSON.parse(localBrain);
        } else {
            // Attempt to fetch your initial 250+ entries from a local json file
            try {
                const response = await fetch('brain.json');
                brain = await response.json();
                saveToLocalStorage();
            } catch (e) {
                brain = { "identity": "Huokaingthara Autonomous OS", "status": "Initial boot complete" };
            }
        }
        updateUI();
        initGraph();
    }

    function saveToLocalStorage() {
        localStorage.setItem('huokaingthara_brain', JSON.stringify(brain));
    }

    // --- NLP & SEARCH LOGIC ---
    function findMatch(query) {
        const keys = Object.keys(brain);
        // Simple fuzzy match logic
        const match = keys.find(k => k.toLowerCase().includes(query.toLowerCase()) || query.toLowerCase().includes(k.toLowerCase()));
        return match ? brain[match] : null;
    }

    // --- UI INTERACTION ---
    const input = document.getElementById('userInput');
    input.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            const val = input.value.trim();
            if (!val) return;
            
            processQuery(val);
            input.value = "";
        }
    });

    function processQuery(q) {
        const chat = document.getElementById('chat-output');
        chat.innerHTML += `<div class="user-msg">> ${q}</div>`;

        if (isLearning) {
            brain[lastQuery] = q;
            saveToLocalStorage();
            chat.innerHTML += `<div class="ai-msg">Neural integration complete. '${lastQuery}' defined.</div>`;
            isLearning = false;
            document.getElementById('learning-indicator').style.display = 'none';
            updateUI();
            return;
        }

        const answer = findMatch(q);
        if (answer) {
            chat.innerHTML += `<div class="ai-msg">AI: ${answer}</div>`;
        } else {
            chat.innerHTML += `<div class="ai-msg" style="color:yellow;">Pattern unknown. Please provide a definition to integrate this concept.</div>`;
            isLearning = true;
            lastQuery = q;
            document.getElementById('learning-indicator').style.display = 'block';
        }
        chat.scrollTop = chat.scrollHeight;
    }

    function updateUI() {
        document.getElementById('stats').innerText = `Memory: ${Object.keys(brain).length} Patterns | System: Online`;
        updateGraph();
    }

    function exportBrain() {
        const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(brain, null, 4));
        const downloadAnchorNode = document.createElement('a');
        downloadAnchorNode.setAttribute("href", dataStr);
        downloadAnchorNode.setAttribute("download", "brain.json");
        document.body.appendChild(downloadAnchorNode);
        downloadAnchorNode.click();
        downloadAnchorNode.remove();
    }

    // --- D3.js VISUALIZER ---
    const svg = d3.select("#visualizer");
    let simulation;

    function initGraph() {
        updateGraph();
    }

    function updateGraph() {
        const width = window.innerWidth - 350;
        const height = window.innerHeight;
        svg.selectAll("*").remove();

        const nodes = [{ id: "CORE", group: 1 }];
        const links = [];
        
        // Take latest 50 entries to avoid lag
        Object.keys(brain).slice(-50).forEach(key => {
            nodes.push({ id: key, group: 2 });
            links.append({ source: "CORE", target: key });
        });

        simulation = d3.forceSimulation(nodes)
            .force("link", d3.forceLink(links).id(d => d.id))
            .force("charge", d3.forceManyBody().strength(-200))
            .force("center", d3.forceCenter(width / 2, height / 2));

        const link = svg.append("g").selectAll("line").data(links).enter().append("line")
            .attr("stroke", "#004411");

        const node = svg.append("g").selectAll("circle").data(nodes).enter().append("circle")
            .attr("r", d => d.group === 1 ? 10 : 5)
            .attr("fill", d => d.group === 1 ? "red" : "#00ff41");

        simulation.on("tick", () => {
            link.attr("x1", d => d.source.x).attr("y1", d => d.source.y).attr("x2", d => d.target.x).attr("y2", d => d.target.y);
            node.attr("cx", d => d.x).attr("cy", d => d.y);
        });
    }

    window.onload = bootSystem;
</script>

</body>
    </html>
    
